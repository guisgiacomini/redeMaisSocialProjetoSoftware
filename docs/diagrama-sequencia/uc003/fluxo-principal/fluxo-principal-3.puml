@startuml
actor "Representante R+S" as representante
boundary "GUI" as gui <<fronteira>>



control "AprovacaoController" as aprovacaoController<<controller>>

collections "Candidatos" as candidatos
collections "Voluntarios" as voluntarios


collections "Recomendacoes" as recomendacoes
collections "Aprovações" as aprovacoes
entity "Candidato" as candidato
entity "Voluntario" as voluntario
entity "Aprovacao" as aprovacao

representante -> gui: aprovaVoluntario(idVoluntario, recomendacao)
activate gui
    gui -> aprovacaoController: aprovaVoluntario(idVoluntario, recomendacao)
    activate aprovacaoController
        aprovacaoController -> recomendacoes: salvaRecomendacao(recomendacao)
        activate recomendacoes
            recomendacoes --> aprovacaoController: recomendacao
        deactivate recomendacoes
        aprovacaoController -> voluntarios: procuraVoluntario(idVoluntario)
        activate voluntarios
            voluntarios -> voluntario: get(idVoluntario)
            activate voluntario
                voluntario --> voluntarios: voluntario
            
            voluntarios --> aprovacaoController: voluntario
        
       
        aprovacaoController -> voluntario: geraLoginSenhaVoluntario(voluntario)
        aprovacaoController -> aprovacao: <<create>>
        activate aprovacao
        aprovacaoController -> aprovacao: associaVoluntario(voluntario)
        aprovacaoController -> aprovacao: insereMotivo(motivo)
        aprovacaoController -> aprovacao: insereStatus(status)
        aprovacaoController -> aprovacao: insereData()
        aprovacaoController -> aprovacoes: salvaAprovacao(aprovacao): aprovacao
        deactivate aprovacao
        deactivate voluntario
        aprovacaoController -> voluntarios: salvaVoluntario(voluntario)
      
        
        deactivate voluntarios

        aprovacaoController -> aprovacaoController: enviaEmailLoginInstrucao(voluntarioEmail, voluntarioLogin, voluntarioSenha)
        aprovacaoController -> aprovacaoController: enviaEmailResultadoAfiliacaoRecomendacao(voluntarioEmail, recomendacao)

        aprovacaoController --> gui: "sucesso"
    deactivate aprovacaoController
deactivate gui
    

@enduml